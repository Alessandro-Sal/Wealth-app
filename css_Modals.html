<style>
   /* --- BOTTOM SHEET MODALS --- */
   /* Sliding panel from bottom, used for Calculators, Search, etc. */
   #common-backdrop { 
       display: none; 
       position: fixed; 
       top: 0; left: 0; 
       width: 100%; height: 100%; 
       background: rgba(0, 0, 0, 0.3); 
       z-index: 1400; 
       backdrop-filter: blur(2px); 
   }
   
   .sheet-modal { 
       position: fixed; 
       bottom: -100%; /* Hidden initially */
       left: 0; 
       width: 100%; 
       background: #f9f9f9; 
       border-radius: 20px 20px 0 0; 
       padding: 20px 20px 90px 20px; 
       box-sizing: border-box; 
       box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.2); 
       transition: bottom 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
       z-index: 1500; 
       display: flex; 
       flex-direction: column; 
       max-height: 85%; 
   }
   .sheet-modal.active { bottom: 0; }
   #common-backdrop.active { display: block; }
   
   .sheet-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
   .sheet-close { background: #e5e5ea; border: none; padding: 5px 15px; border-radius: 15px; font-weight: bold; color: var(--primary); font-size: 14px; cursor: pointer; }
   
   /* --- SEARCH RESULT ITEMS --- */
   .search-res-cont { flex: 1; overflow-y: auto; margin-top: 10px; }
   .search-res-item { padding: 10px 0; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
   .search-res-item:last-child { border-bottom: none; }
   .sr-left { display: flex; flex-direction: column; }
   .sr-cat { font-weight: 600; font-size: 14px; }
   .sr-note { font-size: 12px; color: var(--gray); }
   .sr-date { font-size: 10px; color: var(--gray); margin-top: 2px; }
   .sr-amt { font-weight: bold; font-size: 14px; }
   
   /* --- CALCULATOR INTERFACE --- */
   .calc-display { width: 100%; height: 60px; background: #fff; color: #000; border: 1px solid #ddd; border-radius: 12px; margin-bottom: 15px; text-align: right; font-size: 32px; line-height: 60px; padding: 0 15px; box-sizing: border-box; overflow: hidden; font-weight: 500; }
   .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
   .calc-btn { width: 100%; height: 55px; border-radius: 12px; border: none; font-size: 22px; font-weight: 500; cursor: pointer; background: #e5e5ea; color: #000; transition: background 0.1s; }
   .calc-btn:active { background: #d1d1d6; transform: scale(0.95); }
   .calc-btn.op { background: var(--primary); color: #fff; }
   .calc-btn.clear { background: var(--danger); color: #fff; }
   
   /* --- AI GEMINI CHIPS --- */
   /* Horizontal scrollable suggestion chips for the AI chat */
   .ai-chips-container { display: flex; gap: 10px; overflow-x: auto; padding: 15px 5px; margin-bottom: 10px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
   .ai-chips-container::-webkit-scrollbar { display: none; }
   
   .ai-chip { border: none; border-radius: 50px; padding: 10px 18px; font-size: 13px; font-weight: 600; color: #444; white-space: nowrap; cursor: pointer; background: linear-gradient(145deg, #ffffff, #f0f2f5); box-shadow: 3px 3px 10px rgba(0,0,0,0.05), -3px -3px 10px rgba(255,255,255,0.8); transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
   .ai-chip:hover { transform: translateY(-3px); box-shadow: 5px 5px 15px rgba(0,0,0,0.1); color: #000; }
   .ai-chip:active { transform: scale(0.95); }
   
   /* Context-Specific Chip Colors */
   .ai-chip.magic { background: linear-gradient(135deg, #eef2ff, #e0e7ff); color: #4f46e5; box-shadow: 3px 3px 10px rgba(99, 102, 241, 0.15); }
   .ai-chip.magic:hover { color: #4338ca; background: linear-gradient(135deg, #e0e7ff, #c7d2fe); }
   .ai-chip.crypto { background: linear-gradient(135deg, #fff7ed, #ffedd5); color: #c2410c; box-shadow: 3px 3px 10px rgba(249, 115, 22, 0.15); }
   .ai-chip.crypto:hover { color: #9a3412; background: linear-gradient(135deg, #ffedd5, #fed7aa); }
   .ai-chip.budget { background: linear-gradient(135deg, #fef2f2, #fee2e2); color: #dc2626; box-shadow: 3px 3px 10px rgba(239, 68, 68, 0.15); }
   .ai-chip.budget:hover { color: #b91c1c; background: linear-gradient(135deg, #fee2e2, #fecaca); }
   .ai-chip.fire { background: linear-gradient(135deg, #f0fdfa, #ccfbf1); color: #0d9488; box-shadow: 3px 3px 10px rgba(20, 184, 166, 0.15); }
   .ai-chip.fire:hover { color: #0f766e; background: linear-gradient(135deg, #ccfbf1, #99f6e4); }
   .ai-chip.subs { background: linear-gradient(135deg, #faf5ff, #f3e8ff); color: #9333ea; box-shadow: 3px 3px 10px rgba(168, 85, 247, 0.15); }
   .ai-chip.subs:hover { color: #7e22ce; background: linear-gradient(135deg, #f3e8ff, #d8b4fe); }

   /* --- GEMINI PIN PAD OVERLAY --- */
   /* Specific Security Layer for AI Access */
   #gemini-pin-overlay { 
       position: fixed; top: 0; left: 0; 
       width: 100%; height: 100%; 
       background: rgba(255, 255, 255, 0.85); 
       backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); 
       z-index: 20000; 
       display: flex; flex-direction: column; align-items: center; justify-content: center; 
       opacity: 0; pointer-events: none; 
       transition: opacity 0.3s ease; 
   }
   #gemini-pin-overlay.active { opacity: 1; pointer-events: auto; }
   
   .gemini-pin-title { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 30px; letter-spacing: 0.5px; }
   .gemini-dots-container { display: flex; gap: 15px; margin-bottom: 40px; }
   .gemini-dot { width: 14px; height: 14px; border-radius: 50%; border: 1px solid #ccc; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); }
   .gemini-dot.filled { background: #764ba2; border-color: #764ba2; transform: scale(1.1); }
   
   .gemini-pad-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px 35px; }
   .gemini-key { width: 75px; height: 75px; border-radius: 50%; background: white; border: 1px solid rgba(0,0,0,0.05); font-size: 26px; font-weight: 500; color: #333; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: transform 0.1s, background 0.2s; user-select: none; }
   .gemini-key:active { transform: scale(0.92); background: #f5f5f7; }
   
   /* Special keys (Cancel / Backspace) */
   .gemini-key.action-btn { background: transparent; border: none; box-shadow: none; font-size: 15px; font-weight: 600; }
   .gemini-key.cancel { color: #ff3b30; }
   .gemini-key.clear { color: #333; font-size: 20px; }
   
   /* Shake Animation for Wrong PIN */
   @keyframes geminiShake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-10px); } 40%, 80% { transform: translateX(10px); } }
   .gemini-shake { animation: geminiShake 0.4s ease-in-out; }

   /* --- GEMINI CONFIRM MODAL --- */
   /* "Are you sure?" dialog for locking AI */
   #gemini-confirm-overlay { 
       position: fixed; top: 0; left: 0; 
       width: 100%; height: 100%; 
       background: rgba(0, 0, 0, 0.3); 
       backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); 
       z-index: 21000; 
       display: flex; align-items: center; justify-content: center; 
       opacity: 0; pointer-events: none; 
       transition: opacity 0.2s ease; 
   }
   #gemini-confirm-overlay.active { opacity: 1; pointer-events: auto; }
   
   .gemini-confirm-card { background: rgba(255, 255, 255, 0.95); width: 80%; max-width: 320px; border-radius: 20px; padding: 25px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); transform: scale(0.95); transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
   #gemini-confirm-overlay.active .gemini-confirm-card { transform: scale(1); }
   
   .gemini-confirm-icon { font-size: 40px; margin-bottom: 15px; display: block; }
   .gemini-confirm-title { font-size: 18px; font-weight: 700; color: #333; margin-bottom: 8px; }
   .gemini-confirm-desc { font-size: 14px; color: #666; margin-bottom: 25px; line-height: 1.4; }
   .gemini-confirm-actions { display: flex; gap: 10px; justify-content: center; }
   .gemini-btn { flex: 1; padding: 12px 0; border: none; border-radius: 12px; font-size: 14px; font-weight: 600; cursor: pointer; }
   .gemini-btn.cancel { background: #f2f2f7; color: #333; }
   .gemini-btn.lock { background: #ff3b30; color: white; box-shadow: 0 4px 10px rgba(255, 59, 48, 0.2); }
</style>